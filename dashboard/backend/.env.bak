# ============================================
# ENVIRONMENT CONFIGURATION
# Copy this file to .env and fill in real values
# DO NOT commit .env to version control
# ============================================

# ===== CORE SETTINGS =====
NODE_ENV=development
PORT=5000

# ===== DATABASE =====
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:CHANGE_THIS_PASSWORD@localhost:5432/dashboard

# ===== REDIS =====
# Redis connection URL for caching and queues
# Format: redis://[:password@]host:port[/db-number]
REDIS_URL=redis://localhost:6379/0

# ===== JWT AUTHENTICATION =====
# Generate with: openssl rand -base64 64
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_RANDOM_STRING_MIN_32_CHARS
ACCESS_TOKEN_EXP=15m
REFRESH_TOKEN_EXP=7d

# ===== CORS =====
# Comma-separated list of allowed origins
# Example: http://localhost:5173,https://yourdomain.com
CORS_ORIGINS=http://localhost:5173

# ===== SECURITY =====
# Set to true if behind nginx/load balancer
TRUST_PROXY=false

# API Key pepper for hashing (generate with: openssl rand -base64 32)
API_KEY_PEPPER=CHANGE_THIS_TO_A_SECURE_RANDOM_STRING_MIN_16_CHARS

# ===== MICRO-SURVEY INTEGRATION =====
# Base URL of your Micro-Survey service
MICROSURVEY_BASE_URL=http://localhost:4000

# API key for Micro-Survey authentication
MICROSURVEY_API_KEY=your_microsurvey_api_key_here

# Connection settings
MICROSURVEY_TIMEOUT_MS=5000
MICROSURVEY_RETRY_ATTEMPTS=3
MICROSURVEY_CIRCUIT_BREAKER_THRESHOLD=5
MICROSURVEY_CIRCUIT_BREAKER_TIMEOUT=60000

# ===== FEATURE FLAGS =====
# Use mock Micro-Survey for development/testing
USE_MOCK_MICROSURVEY=true

# Enable webhook processing
ENABLE_WEBHOOKS=true

# ===== QUEUE SETTINGS =====
QUEUE_CONCURRENCY=5
QUEUE_PREFIX=dashboard

# ===== LOGGING =====
# Options: error, warn, info, debug
LOG_LEVEL=info

# Options: json, pretty
LOG_FORMAT=pretty

# ===== RATE LIMITING =====
# Window in milliseconds (900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# Maximum auth attempts per window
RATE_LIMIT_AUTH_MAX=5

# ===== PRODUCTION CHECKLIST =====
# Before deploying to production:
# 1. Change JWT_SECRET to a strong random value
# 2. Change API_KEY_PEPPER to a strong random value
# 3. Set NODE_ENV=production
# 4. Update DATABASE_URL with production credentials
# 5. Update REDIS_URL with production credentials
# 6. Set TRUST_PROXY=true if behind reverse proxy
# 7. Update CORS_ORIGINS to your production domains (NO wildcards)
# 8. Set USE_MOCK_MICROSURVEY=false
# 9. Configure real MICROSURVEY_BASE_URL and MICROSURVEY_API_KEY
# 10. Review and adjust RATE_LIMIT settings for your traffic
